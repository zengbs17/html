<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BAMBOOåˆ†å­åŠ¨åŠ›å­¦æ¨¡æ‹Ÿä»»åŠ¡æäº¤</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 1.8em;
            font-weight: 300;
        }
        
        .workflow-container {
            padding: 20px;
        }
        
        .timeline-layout {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 40px;
            position: relative;
            margin-bottom: 30px;
        }
        
        .timeline-column {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            position: relative;
            border: 2px solid #e9ecef;
            min-height: 800px;
        }
        
        .column-header {
            text-align: center;
            font-weight: 600;
            font-size: 1.1em;
            margin-bottom: 20px;
            padding: 12px;
            border-radius: 8px;
            color: white;
            position: sticky;
            top: 0;
            z-index: 5;
        }
        
        .local-env {
            border-color: #0277bd;
        }
        
        .local-env .column-header {
            background: #0277bd;
        }
        
        .nas-storage {
            border-color: #f57c00;
        }
        
        .nas-storage .column-header {
            background: #f57c00;
        }
        
        .serverless-cluster {
            border-color: #7b1fa2;
        }
        
        .serverless-cluster .column-header {
            background: #7b1fa2;
        }
        
        .timeline-step {
            margin: 20px 0;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 60px;
        }
        
        .timeline-step:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .timeline-step.active {
            transform: scale(1.02);
            box-shadow: 0 6px 20px rgba(255,193,7,0.3);
            border-left-color: #ffc107;
        }
        
        .step-local {
            border-left-color: #0277bd;
        }
        
        .step-nas {
            border-left-color: #f57c00;
        }
        
        .step-remote {
            border-left-color: #7b1fa2;
        }
        
        .step-number {
            position: absolute;
            left: -12px;
            top: 15px;
            width: 20px;
            height: 20px;
            background: #667eea;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
            font-weight: 600;
            border: 2px solid white;
        }
        
        .step-title {
            font-weight: 600;
            margin-bottom: 5px;
            color: #333;
            font-size: 1em;
        }
        
        .step-desc {
            font-size: 0.9em;
            color: #666;
            line-height: 1.4;
        }
        
        .step-timing {
            position: absolute;
            top: 5px;
            right: 8px;
            font-size: 0.7em;
            color: #999;
            font-weight: 500;
        }
        
        .flow-connection {
            position: absolute;
            z-index: 10;
            pointer-events: none;
        }
        
        .flow-line {
            stroke: #28a745;
            stroke-width: 3;
            fill: none;
            stroke-dasharray: 8,4;
            animation: flowDash 2s linear infinite;
        }
        
        .flow-line.reverse {
            stroke: #dc3545;
        }
        
        .flow-arrow-marker {
            fill: #28a745;
        }
        
        .flow-arrow-marker.reverse {
            fill: #dc3545;
        }
        
        .flow-label {
            background: rgba(255, 255, 255, 0.95);
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 600;
            color: #333;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        @keyframes flowDash {
            0% {
                stroke-dashoffset: 0;
            }
            100% {
                stroke-dashoffset: -24;
            }
        }
        
        .loop-indicator {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ffc107;
            color: #333;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7em;
            font-weight: 600;
            border: 2px solid white;
        }
        
        .progress-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            flex-wrap: wrap;
        }
        
        .progress-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .progress-btn:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }
        
        .progress-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .progress-btn.active {
            background: #ffc107;
            color: #333;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(255, 193, 7, 0.3);
        }
        
        .progress-arrow {
            color: #667eea;
            font-size: 1.2em;
            font-weight: 600;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }
        
        .progress-info {
            text-align: center;
            margin: 10px 0;
            font-size: 0.9em;
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 13px;
            pointer-events: none;
            z-index: 1000;
            max-width: 300px;
            display: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        @media (max-width: 1200px) {
            .timeline-layout {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .timeline-column {
                min-height: auto;
            }
            
            .progress-controls {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ§¬ BAMBOO MD ä»»åŠ¡æäº¤</h1>
            <div style="font-size: 0.9em; margin-top: 10px; opacity: 0.9;">
                ğŸ’¡ ç‚¹å‡»è¿›åº¦æ§åˆ¶æŸ¥çœ‹ä¸åŒé˜¶æ®µçš„æ•°æ®æµå‘ | æ‚¬åœæ­¥éª¤æŸ¥çœ‹è¯¦ç»†è¯´æ˜
            </div>
        </div>
        
        <div class="workflow-container">
            <!-- è¿›åº¦æ§åˆ¶ -->
            <div class="progress-controls">
                <button class="progress-btn" onclick="showProgress(0)" id="btn-0">åˆå§‹åŒ–é˜¶æ®µ</button>
                <span class="progress-arrow">â†’</span>
                <button class="progress-btn" onclick="showProgress(1)" id="btn-1">ä»»åŠ¡ç”Ÿæˆé˜¶æ®µ</button>
                <span class="progress-arrow">â†’</span>
                <button class="progress-btn" onclick="showProgress(2)" id="btn-2">ä»»åŠ¡æäº¤é˜¶æ®µ</button>
                <span class="progress-arrow">â†’</span>
                <button class="progress-btn" onclick="showProgress(3)" id="btn-3">è¿œç¨‹æ‰§è¡Œé˜¶æ®µ</button>
                <span class="progress-arrow">â†’</span>
                <button class="progress-btn" onclick="showProgress(4)" id="btn-4">ç»“æœå›æ”¶é˜¶æ®µ</button>
                <span class="progress-arrow">â†’</span>
                <button class="progress-btn" onclick="showProgress(5)" id="btn-5">å®Œæˆé˜¶æ®µ</button>
                <span style="margin: 0 10px;">|</span>
                <button class="progress-btn" onclick="showProgress(-1)" id="btn-all">æ˜¾ç¤ºå…¨éƒ¨</button>
            </div>
            
            <div class="progress-info" id="progressInfo">
                ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æŸ¥çœ‹ä¸åŒé˜¶æ®µçš„æ•°æ®æµå‘ï¼ˆå½“å‰æ˜¾ç¤ºå…¨éƒ¨ï¼‰
            </div>
            
            <!-- æ—¶åºå¸ƒå±€ -->
            <div class="timeline-layout">
                <!-- SVG for flow connections -->
                <svg class="flow-connection" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;">
                    <defs>
                        <marker id="arrowhead" markerWidth="12" markerHeight="8" refX="11" refY="4" orient="auto">
                            <polygon points="0 0, 12 4, 0 8" fill="#28a745" />
                        </marker>
                    </defs>
                    
                    <!-- åŠ¨æ€ç”Ÿæˆçš„è¿æ¥çº¿å°†åœ¨è¿™é‡Œ -->
                    <g id="flowConnections"></g>
                </svg>
                
                <!-- å¼€å‘æœºæœ¬åœ°ç¯å¢ƒ -->
                <div class="timeline-column local-env">
                    <div class="column-header">
                        ğŸ  å¼€å‘æœºæœ¬åœ°ç¯å¢ƒ
                    </div>
                    
                    <div class="timeline-step step-local" data-step="0" data-stage="0"
                         data-tooltip="ç”¨æˆ·åœ¨ç»ˆç«¯æ‰§è¡Œå‘½ä»¤ï¼Œè®¾ç½®ç¯å¢ƒå˜é‡NAS_PATH=ai4s-wlå¹¶å¯åŠ¨submit_oplsaa.pyè„šæœ¬">
                        <div class="step-number">1</div>
                        <div class="step-timing">T+0s</div>
                        <div class="step-title">ğŸš€ æ‰§è¡Œå‘½ä»¤</div>
                        <div class="step-desc">
                            NAS_PATH=ai4s-wl python3 -m scripts.submit_oplsaa<br>
                            å¯åŠ¨å·¥ä½œæµç¨‹
                        </div>
                    </div>
                    
                    <div class="timeline-step step-local" data-step="1" data-stage="0"
                         data-tooltip="è§£æç¯å¢ƒå˜é‡å’Œå‘½ä»¤è¡Œå‚æ•°ï¼Œåˆå§‹åŒ–BambooWrapperå®¢æˆ·ç«¯è¿æ¥ç”Ÿäº§ç¯å¢ƒ">
                        <div class="step-number">2</div>
                        <div class="step-timing">T+0.1s</div>
                        <div class="step-title">ğŸ”§ å‚æ•°è§£æ</div>
                        <div class="step-desc">
                            è§£æå‘½ä»¤è¡Œå‚æ•°<br>
                            åˆå§‹åŒ–BambooWrapper<br>
                            è¿æ¥PRODç¯å¢ƒ
                        </div>
                    </div>
                    
                    <div class="timeline-step step-local" data-step="2" data-stage="1"
                         data-tooltip="è¯»å–JSONé…ç½®æ–‡ä»¶ï¼ŒåŒ…å«æ¨¡æ‹Ÿä½“ç³»çš„åŒ–å­¦æˆåˆ†ã€æ¸©åº¦ã€å‹åŠ›ç­‰å‚æ•°">
                        <div class="step-number">3</div>
                        <div class="step-timing">T+0.2s</div>
                        <div class="step-title">ğŸ“– è¯»å–é…ç½®</div>
                        <div class="step-desc">
                            è¯»å–test_md_submit.json<br>
                            è§£ææ¨¡æ‹Ÿå‚æ•°<br>
                            éªŒè¯é…ç½®æœ‰æ•ˆæ€§
                        </div>
                    </div>
                    
                    <div class="timeline-step step-local" data-step="3" data-stage="1"
                         data-tooltip="ä¸ºæ¯ä¸ªJSONæ¡ç›®åˆ›å»º5ä¸ªé‡å¤ä»»åŠ¡ï¼Œç”Ÿæˆç‹¬ç«‹çš„é…ç½®æ–‡ä»¶å’Œå·¥ä½œç›®å½•">
                        <div class="step-number">4</div>
                        <div class="step-timing">T+0.5s</div>
                        <div class="step-title">âš™ï¸ ç”Ÿæˆä»»åŠ¡</div>
                        <div class="step-desc">
                            éå†JSONæ¡ç›®<br>
                            æ¯ä¸ªæ¡ç›®ç”Ÿæˆ5ä¸ªé‡å¤ä»»åŠ¡<br>
                            åˆ›å»ºç‹¬ç«‹é…ç½®
                        </div>
                        <div class="loop-indicator">ğŸ”„</div>
                    </div>
                    
                    <div class="timeline-step step-local" data-step="4" data-stage="2"
                         data-tooltip="å°†ä»»åŠ¡æ‰“åŒ…æˆPkgTaskBaseå¯¹è±¡ï¼Œå‡†å¤‡æäº¤åˆ°æ— æœåŠ¡å™¨å¹³å°">
                        <div class="step-number">5</div>
                        <div class="step-timing">T+2s</div>
                        <div class="step-title">ğŸ“¦ æ‰“åŒ…ä»»åŠ¡</div>
                        <div class="step-desc">
                            å°è£…PkgTaskBaseå¯¹è±¡<br>
                            åŒ…å«æ‰§è¡Œå‘½ä»¤å’Œå…ƒæ•°æ®<br>
                            å‡†å¤‡æ‰¹é‡æäº¤
                        </div>
                    </div>
                    
                    <div class="timeline-step step-local" data-step="5" data-stage="2"
                         data-tooltip="å°†ä»»åŠ¡æäº¤åˆ°é˜Ÿåˆ—381531ï¼Œåˆ›å»ºæ–­ç‚¹ç»­ä¼ æ–‡ä»¶">
                        <div class="step-number">6</div>
                        <div class="step-timing">T+5s</div>
                        <div class="step-title">ğŸš€ æäº¤ä»»åŠ¡</div>
                        <div class="step-desc">
                            æäº¤åˆ°é˜Ÿåˆ—381531<br>
                            åˆ›å»ºsubmitted.txt<br>
                            è®°å½•æäº¤è¿›åº¦
                        </div>
                        <div class="loop-indicator">ğŸ”„</div>
                    </div>
                    
                    <div class="timeline-step step-local" data-step="6" data-stage="5"
                         data-tooltip="æœ¬åœ°è„šæœ¬æ‰§è¡Œå®Œæˆï¼Œæ‰€æœ‰ä»»åŠ¡å·²æäº¤ï¼Œå¯ä»¥æŸ¥çœ‹è¿›åº¦">
                        <div class="step-number">7</div>
                        <div class="step-timing">T+10s</div>
                        <div class="step-title">âœ… æœ¬åœ°å®Œæˆ</div>
                        <div class="step-desc">
                            è„šæœ¬æ‰§è¡Œå®Œæˆ<br>
                            æ‰€æœ‰ä»»åŠ¡å·²æäº¤<br>
                            å¯æŸ¥çœ‹æ‰§è¡Œè¿›åº¦
                        </div>
                    </div>
                </div>
                
                <!-- NASå…±äº«å­˜å‚¨ -->
                <div class="timeline-column nas-storage">
                    <div class="column-header">
                        ğŸ—„ï¸ NASå…±äº«å­˜å‚¨
                    </div>
                    
                    <div class="timeline-step step-nas" data-step="7" data-stage="0"
                         data-tooltip="åœ¨NASä¸Šåˆ›å»ºæ‰¹å¤„ç†æ ¹ç›®å½•ï¼Œè®¾ç½®æƒé™å’Œç›®å½•ç»“æ„">
                        <div class="step-number">1</div>
                        <div class="step-timing">T+0.3s</div>
                        <div class="step-title">ğŸ“ åˆ›å»ºæ‰¹æ¬¡ç›®å½•</div>
                        <div class="step-desc">
                            /mnt/bn/ai4s-wl/bamboo/bamboo_simulation/<br>
                            zengbs_test_md_0716/<br>
                            è®¾ç½®ç›®å½•æƒé™
                        </div>
                    </div>
                    
                    <div class="timeline-step step-nas" data-step="8" data-stage="1"
                         data-tooltip="ä¸ºæ¯ä¸ªä»»åŠ¡åˆ›å»ºç‹¬ç«‹çš„å·¥ä½œç›®å½•ï¼ŒåŒ…å«job_dirså’Œpostprocesså­ç›®å½•">
                        <div class="step-number">2</div>
                        <div class="step-timing">T+1s</div>
                        <div class="step-title">ğŸ“‚ åˆ›å»ºä»»åŠ¡ç›®å½•</div>
                        <div class="step-desc">
                            åˆ›å»ºjob_dirså­ç›®å½•<br>
                            æ¯ä¸ªä»»åŠ¡ç‹¬ç«‹ç›®å½•<br>
                            j0r0-simulation-0, j0r1-simulation-1...
                        </div>
                        <div class="loop-indicator">ğŸ”„</div>
                    </div>
                    
                    <div class="timeline-step step-nas" data-step="9" data-stage="1"
                         data-tooltip="å°†config.jsonå’Œpost_config.jsonæ–‡ä»¶å†™å…¥å¯¹åº”çš„ä»»åŠ¡ç›®å½•">
                        <div class="step-number">3</div>
                        <div class="step-timing">T+1.5s</div>
                        <div class="step-title">ğŸ’¾ å†™å…¥é…ç½®æ–‡ä»¶</div>
                        <div class="step-desc">
                            ä¿å­˜config.json<br>
                            ä¿å­˜post_config.json<br>
                            OPLSAAåŠ›åœºå‚æ•°
                        </div>
                        <div class="loop-indicator">ğŸ”„</div>
                    </div>
                    
                    <div class="timeline-step step-nas" data-step="10" data-stage="3"
                         data-tooltip="è¿œç¨‹è®¡ç®—èŠ‚ç‚¹ä»NASè¯»å–é…ç½®æ–‡ä»¶ï¼Œè·å–æ¨¡æ‹Ÿå‚æ•°">
                        <div class="step-number">4</div>
                        <div class="step-timing">T+30s</div>
                        <div class="step-title">ğŸ“‹ é…ç½®æ–‡ä»¶è¯»å–</div>
                        <div class="step-desc">
                            è¿œç¨‹èŠ‚ç‚¹è¯»å–config.json<br>
                            è·å–æ¨¡æ‹Ÿå‚æ•°<br>
                            éªŒè¯é…ç½®å®Œæ•´æ€§
                        </div>
                    </div>
                    
                    <div class="timeline-step step-nas" data-step="11" data-stage="4"
                         data-tooltip="æ¥æ”¶æ¥è‡ªè¿œç¨‹è®¡ç®—çš„æ¨¡æ‹Ÿç»“æœï¼ŒåŒ…æ‹¬è½¨è¿¹æ–‡ä»¶ã€æ—¥å¿—ç­‰">
                        <div class="step-number">5</div>
                        <div class="step-timing">T+5min</div>
                        <div class="step-title">ğŸ“ˆ æ¥æ”¶è®¡ç®—ç»“æœ</div>
                        <div class="step-desc">
                            åˆ†å­è½¨è¿¹æ•°æ®<br>
                            æ¨¡æ‹Ÿæ—¥å¿—æ–‡ä»¶<br>
                            ä¸­é—´è®¡ç®—ç»“æœ
                        </div>
                    </div>
                    
                    <div class="timeline-step step-nas" data-step="12" data-stage="4"
                         data-tooltip="æ¥æ”¶åå¤„ç†åˆ†æç»“æœï¼ŒåŒ…æ‹¬ç‰©ç†åŒ–å­¦æ€§è´¨è®¡ç®—ç»“æœ">
                        <div class="step-number">6</div>
                        <div class="step-timing">T+10min</div>
                        <div class="step-title">ğŸ“Š æ¥æ”¶åˆ†æç»“æœ</div>
                        <div class="step-desc">
                            ç‰©ç†åŒ–å­¦æ€§è´¨æ•°æ®<br>
                            ç»Ÿè®¡åˆ†æç»“æœ<br>
                            å¼‚å¸¸æ£€æµ‹æŠ¥å‘Š
                        </div>
                    </div>
                    
                    <div class="timeline-step step-nas" data-step="13" data-stage="5"
                         data-tooltip="æ‰€æœ‰ä»»åŠ¡å®Œæˆï¼Œæ›´æ–°çŠ¶æ€è®°å½•ï¼Œæ•°æ®é›†å®Œæ•´å¯ç”¨">
                        <div class="step-number">7</div>
                        <div class="step-timing">T+15min</div>
                        <div class="step-title">âœ… æ•°æ®é›†å®Œæ•´</div>
                        <div class="step-desc">
                            æ‰€æœ‰ä»»åŠ¡ç»“æœå®Œæ•´<br>
                            æ›´æ–°çŠ¶æ€è®°å½•<br>
                            æ•°æ®å¯ä¾›åˆ†æä½¿ç”¨
                        </div>
                    </div>
                </div>
                
                <!-- AI4S Serverlessé›†ç¾¤ -->
                <div class="timeline-column serverless-cluster">
                    <div class="column-header">
                        â˜ï¸ AI4S Serverlessé›†ç¾¤
                    </div>
                    
                    <div class="timeline-step step-remote" data-step="14" data-stage="2"
                         data-tooltip="ä»»åŠ¡è°ƒåº¦å™¨ä»é˜Ÿåˆ—381531ä¸­å–å‡ºä»»åŠ¡ï¼Œå¼€å§‹åˆ†é…è®¡ç®—èµ„æº">
                        <div class="step-number">1</div>
                        <div class="step-timing">T+20s</div>
                        <div class="step-title">ğŸ¯ ä»»åŠ¡è°ƒåº¦</div>
                        <div class="step-desc">
                            ä»é˜Ÿåˆ—381531å–å‡ºä»»åŠ¡<br>
                            è¯„ä¼°èµ„æºéœ€æ±‚<br>
                            åˆ†é…è®¡ç®—èŠ‚ç‚¹
                        </div>
                    </div>
                    
                    <div class="timeline-step step-remote" data-step="15" data-stage="3"
                         data-tooltip="GPUè®¡ç®—èŠ‚ç‚¹å¼€å§‹æ‰§è¡Œåˆ†å­åŠ¨åŠ›å­¦æ¨¡æ‹Ÿ">
                        <div class="step-number">2</div>
                        <div class="step-timing">T+1min</div>
                        <div class="step-title">ğŸ–¥ï¸ GPUè®¡ç®—å¯åŠ¨</div>
                        <div class="step-desc">
                            A10 GPUèŠ‚ç‚¹å¯åŠ¨<br>
                            åŠ è½½OPLSAAåŠ›åœº<br>
                            å¼€å§‹MDæ¨¡æ‹Ÿ
                        </div>
                    </div>
                    
                    <div class="timeline-step step-remote" data-step="16" data-stage="3"
                         data-tooltip="æ‰§è¡Œåˆ†å­åŠ¨åŠ›å­¦æ¨¡æ‹Ÿè®¡ç®—ï¼Œç”Ÿæˆåˆ†å­è½¨è¿¹æ•°æ®">
                        <div class="step-number">3</div>
                        <div class="step-timing">T+2min</div>
                        <div class="step-title">ğŸ§ª MDæ¨¡æ‹Ÿæ‰§è¡Œ</div>
                        <div class="step-desc">
                            OPLSAAåŠ›åœºè®¡ç®—<br>
                            ç”Ÿæˆåˆ†å­è½¨è¿¹<br>
                            è®°å½•çƒ­åŠ›å­¦æ•°æ®
                        </div>
                    </div>
                    
                    <div class="timeline-step step-remote" data-step="17" data-stage="4"
                         data-tooltip="æ¨¡æ‹Ÿå®Œæˆï¼Œå°†ç»“æœæ•°æ®å†™å›NASå­˜å‚¨">
                        <div class="step-number">4</div>
                        <div class="step-timing">T+4min</div>
                        <div class="step-title">ğŸ’¾ ç»“æœå†™å›</div>
                        <div class="step-desc">
                            å†™å›è½¨è¿¹æ•°æ®<br>
                            å†™å›æ—¥å¿—æ–‡ä»¶<br>
                            æ›´æ–°ä»»åŠ¡çŠ¶æ€
                        </div>
                    </div>
                    
                    <div class="timeline-step step-remote" data-step="18" data-stage="4"
                         data-tooltip="CPUåå¤„ç†èŠ‚ç‚¹å¯åŠ¨ï¼Œå¼€å§‹æ•°æ®åˆ†æ">
                        <div class="step-number">5</div>
                        <div class="step-timing">T+6min</div>
                        <div class="step-title">ğŸ”§ åå¤„ç†å¯åŠ¨</div>
                        <div class="step-desc">
                            CPUèŠ‚ç‚¹å¯åŠ¨<br>
                            è¯»å–æ¨¡æ‹Ÿæ•°æ®<br>
                            å¼€å§‹æ•°æ®åˆ†æ
                        </div>
                    </div>
                    
                    <div class="timeline-step step-remote" data-step="19" data-stage="4"
                         data-tooltip="è¿›è¡Œæ•°æ®åˆ†æï¼Œè®¡ç®—ç‰©ç†åŒ–å­¦æ€§è´¨ï¼Œæ£€æµ‹å¼‚å¸¸">
                        <div class="step-number">6</div>
                        <div class="step-timing">T+8min</div>
                        <div class="step-title">ğŸ“Š æ•°æ®åˆ†æ</div>
                        <div class="step-desc">
                            ç»Ÿè®¡åˆ†æ<br>
                            ç‰©ç†åŒ–å­¦æ€§è´¨è®¡ç®—<br>
                            å¼‚å¸¸æ£€æµ‹
                        </div>
                    </div>
                    
                    <div class="timeline-step step-remote" data-step="20" data-stage="5"
                         data-tooltip="æ‰€æœ‰è®¡ç®—ä»»åŠ¡å®Œæˆï¼Œé‡Šæ”¾è®¡ç®—èµ„æº">
                        <div class="step-number">7</div>
                        <div class="step-timing">T+12min</div>
                        <div class="step-title">âœ… ä»»åŠ¡å®Œæˆ</div>
                        <div class="step-desc">
                            æ‰€æœ‰è®¡ç®—å®Œæˆ<br>
                            é‡Šæ”¾è®¡ç®—èµ„æº<br>
                            æ›´æ–°ä»»åŠ¡çŠ¶æ€
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="tooltip" id="tooltip"></div>
    
    <script>
        // æ—¶åºæ­¥éª¤å®šä¹‰
        const progressStages = {
            0: { name: 'åˆå§‹åŒ–é˜¶æ®µ', desc: 'å¯åŠ¨è„šæœ¬ï¼Œè§£æå‚æ•°ï¼Œåˆ›å»ºNASç›®å½•' },
            1: { name: 'ä»»åŠ¡ç”Ÿæˆé˜¶æ®µ', desc: 'è¯»å–é…ç½®ï¼Œç”Ÿæˆä»»åŠ¡ï¼Œå†™å…¥NAS' },
            2: { name: 'ä»»åŠ¡æäº¤é˜¶æ®µ', desc: 'æ‰“åŒ…ä»»åŠ¡ï¼Œæäº¤åˆ°è¿œç¨‹é˜Ÿåˆ—ï¼Œå¼€å§‹è°ƒåº¦' },
            3: { name: 'è¿œç¨‹æ‰§è¡Œé˜¶æ®µ', desc: 'GPUè®¡ç®—ï¼ŒMDæ¨¡æ‹Ÿï¼Œä»NASè¯»å–é…ç½®' },
            4: { name: 'ç»“æœå›æ”¶é˜¶æ®µ', desc: 'å†™å›ç»“æœï¼Œåå¤„ç†åˆ†æï¼Œæ•°æ®å›æµ' },
            5: { name: 'å®Œæˆé˜¶æ®µ', desc: 'æ‰€æœ‰ä»»åŠ¡å®Œæˆï¼Œæ•°æ®é›†å®Œæ•´å¯ç”¨' }
        };
        
        // æ•°æ®æµå‘å®šä¹‰ (åŒ…å«å…·ä½“æ­¥éª¤è¿æ¥)
        const dataFlows = {
            0: [
                { from: 'local', to: 'nas', fromStep: 1, toStep: 7, label: 'åˆ›å»ºç›®å½•æŒ‡ä»¤', color: '#28a745' }
            ],
            1: [
                { from: 'local', to: 'nas', fromStep: 2, toStep: 8, label: 'é…ç½®æ•°æ®', color: '#28a745' },
                { from: 'local', to: 'nas', fromStep: 3, toStep: 9, label: 'ä»»åŠ¡é…ç½®', color: '#28a745' }
            ],
            2: [
                { from: 'local', to: 'remote', fromStep: 4, toStep: 14, label: 'ä»»åŠ¡æŒ‡ä»¤', color: '#28a745' }
            ],
            3: [
                { from: 'nas', to: 'remote', fromStep: 10, toStep: 15, label: 'é…ç½®æ–‡ä»¶', color: '#28a745' }
            ],
            4: [
                { from: 'remote', to: 'nas', fromStep: 17, toStep: 11, label: 'è®¡ç®—ç»“æœ', color: '#dc3545' },
                { from: 'remote', to: 'nas', fromStep: 19, toStep: 12, label: 'åˆ†ææ•°æ®', color: '#dc3545' }
            ],
            5: [
                { from: 'nas', to: 'local', fromStep: 13, toStep: 6, label: 'çŠ¶æ€åé¦ˆ', color: '#dc3545' }
            ]
        };
        
        let currentStage = -1;
        
        // è·å–æ‰€æœ‰äº¤äº’å…ƒç´ 
        const timelineSteps = document.querySelectorAll('.timeline-step');
        const tooltip = document.getElementById('tooltip');
        const progressInfo = document.getElementById('progressInfo');
        
        // æ·»åŠ æ‚¬åœæç¤ºåŠŸèƒ½
        timelineSteps.forEach(step => {
            step.addEventListener('mouseenter', (e) => {
                const tooltipText = step.getAttribute('data-tooltip');
                if (tooltipText) {
                    tooltip.innerHTML = tooltipText;
                    tooltip.style.display = 'block';
                }
            });
            
            step.addEventListener('mousemove', (e) => {
                tooltip.style.left = e.pageX + 15 + 'px';
                tooltip.style.top = e.pageY - 10 + 'px';
            });
            
            step.addEventListener('mouseleave', () => {
                tooltip.style.display = 'none';
            });
        });
        
        // æ˜¾ç¤ºè¿›åº¦å‡½æ•°
        function showProgress(stage) {
            currentStage = stage;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.progress-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            if (stage === -1) {
                document.getElementById('btn-all').classList.add('active');
            } else {
                document.getElementById('btn-' + stage).classList.add('active');
            }
            
            // æ›´æ–°è¿›åº¦ä¿¡æ¯
            if (stage === -1) {
                progressInfo.innerHTML = 'æ˜¾ç¤ºå…¨éƒ¨æ­¥éª¤å’Œæ•°æ®æµå‘';
            } else {
                const stageInfo = progressStages[stage];
                progressInfo.innerHTML = `<strong>å½“å‰é˜¶æ®µï¼š${stageInfo.name}</strong><br>${stageInfo.desc}`;
            }
            
            // é‡ç½®æ‰€æœ‰æ­¥éª¤
            timelineSteps.forEach(step => {
                step.classList.remove('active');
                step.style.opacity = stage === -1 ? '1' : '0.3';
            });
            
            // æ¿€æ´»å½“å‰é˜¶æ®µçš„æ­¥éª¤
            if (stage !== -1) {
                timelineSteps.forEach(step => {
                    if (step.getAttribute('data-stage') == stage) {
                        step.classList.add('active');
                        step.style.opacity = '1';
                    }
                });
            } else {
                timelineSteps.forEach(step => {
                    step.style.opacity = '1';
                });
            }
            
            // æ˜¾ç¤ºæ•°æ®æµå‘
            showDataFlows(stage);
        }
        
        // æ˜¾ç¤ºæ•°æ®æµå‘
        function showDataFlows(stage) {
            const flowConnections = document.getElementById('flowConnections');
            flowConnections.innerHTML = '';
            
            if (stage === -1) {
                // æ˜¾ç¤ºæ‰€æœ‰æ•°æ®æµå‘
                Object.values(dataFlows).forEach(flows => {
                    flows.forEach(flow => drawFlow(flow));
                });
            } else if (dataFlows[stage]) {
                // æ˜¾ç¤ºç‰¹å®šé˜¶æ®µçš„æ•°æ®æµå‘
                dataFlows[stage].forEach(flow => drawFlow(flow));
            }
        }
        
        // ç»˜åˆ¶æ•°æ®æµå‘
        function drawFlow(flow) {
            const flowConnections = document.getElementById('flowConnections');
            
            // æ‰¾åˆ°å¯¹åº”çš„æ­¥éª¤å…ƒç´ 
            const fromStep = document.querySelector(`[data-step="${flow.fromStep}"]`);
            const toStep = document.querySelector(`[data-step="${flow.toStep}"]`);
            
            if (!fromStep || !toStep) return;
            
            // è·å–æ­¥éª¤çš„ä½ç½®ä¿¡æ¯
            const fromRect = fromStep.getBoundingClientRect();
            const toRect = toStep.getBoundingClientRect();
            const containerRect = document.querySelector('.timeline-layout').getBoundingClientRect();
            
            // è®¡ç®—è¿æ¥ç‚¹
            let fromX, fromY, toX, toY;
            
            if (flow.color === '#28a745') {
                // ç»¿è‰²ç®­å¤´ï¼ˆå‘å³ï¼‰ï¼šä»å³è¾¹å‡ºå‘ï¼Œåˆ°å·¦è¾¹ç»“æŸ
                fromX = fromRect.right - containerRect.left;
                fromY = fromRect.top + fromRect.height / 2 - containerRect.top;
                toX = toRect.left - containerRect.left;
                toY = toRect.top + toRect.height / 2 - containerRect.top;
            } else {
                // çº¢è‰²ç®­å¤´ï¼ˆå‘å·¦ï¼‰ï¼šä»å·¦è¾¹å‡ºå‘ï¼Œåˆ°å³è¾¹ç»“æŸ
                fromX = fromRect.left - containerRect.left;
                fromY = fromRect.top + fromRect.height / 2 - containerRect.top;
                toX = toRect.right - containerRect.left;
                toY = toRect.top + toRect.height / 2 - containerRect.top;
            }
            
            // åˆ›å»ºæ›²çº¿è·¯å¾„
            const midX = (fromX + toX) / 2;
            const controlOffset = Math.abs(fromX - toX) * 0.3;
            
            // åˆ›å»ºç®­å¤´æ ‡è®°ï¼ˆåŠ¨æ€é¢œè‰²ï¼‰
            const markerId = 'arrowhead-' + (flow.color === '#dc3545' ? 'red' : 'green');
            let marker = document.getElementById(markerId);
            if (!marker) {
                marker = document.createElementNS('http://www.w3.org/2000/svg', 'marker');
                marker.setAttribute('id', markerId);
                marker.setAttribute('markerWidth', '12');
                marker.setAttribute('markerHeight', '8');
                marker.setAttribute('refX', '11');
                marker.setAttribute('refY', '4');
                marker.setAttribute('orient', 'auto');
                
                const arrowPolygon = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
                arrowPolygon.setAttribute('points', '0 0, 12 4, 0 8');
                arrowPolygon.setAttribute('fill', flow.color);
                
                marker.appendChild(arrowPolygon);
                document.querySelector('defs').appendChild(marker);
            }
            
            const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            const pathData = `M ${fromX} ${fromY} Q ${midX} ${fromY - controlOffset} ${toX} ${toY}`;
            path.setAttribute('d', pathData);
            path.setAttribute('stroke', flow.color);
            path.setAttribute('stroke-width', '3');
            path.setAttribute('fill', 'none');
            path.setAttribute('stroke-dasharray', '8,4');
            path.setAttribute('marker-end', `url(#${markerId})`);
            
            // æ·»åŠ åŠ¨ç”»
            const animate = document.createElementNS('http://www.w3.org/2000/svg', 'animate');
            animate.setAttribute('attributeName', 'stroke-dashoffset');
            animate.setAttribute('values', '0;-24');
            animate.setAttribute('dur', '2s');
            animate.setAttribute('repeatCount', 'indefinite');
            path.appendChild(animate);
            
            // åˆ›å»ºæ ‡ç­¾èƒŒæ™¯
            const labelBg = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
            const labelX = midX;
            const labelY = fromY - controlOffset - 25;
            const labelWidth = flow.label.length * 8 + 16;
            const labelHeight = 20;
            
            labelBg.setAttribute('x', labelX - labelWidth / 2);
            labelBg.setAttribute('y', labelY);
            labelBg.setAttribute('width', labelWidth);
            labelBg.setAttribute('height', labelHeight);
            labelBg.setAttribute('fill', 'rgba(255, 255, 255, 0.95)');
            labelBg.setAttribute('stroke', '#ccc');
            labelBg.setAttribute('rx', 10);
            labelBg.setAttribute('ry', 10);
            
            // åˆ›å»ºæ ‡ç­¾æ–‡æœ¬
            const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            text.setAttribute('x', labelX);
            text.setAttribute('y', labelY + 14);
            text.setAttribute('text-anchor', 'middle');
            text.setAttribute('font-size', '12px');
            text.setAttribute('font-weight', '600');
            text.setAttribute('fill', '#333');
            text.textContent = flow.label;
            
            // æ·»åŠ åˆ°SVG
            flowConnections.appendChild(path);
            flowConnections.appendChild(labelBg);
            flowConnections.appendChild(text);
        }
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            showProgress(-1);
        });
    </script>
</body>
</html>